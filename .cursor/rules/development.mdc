---
description: 
globs: 
alwaysApply: false
---
# Alioth Project Development Rules

You are working on Alioth, a unified AI-driven DeFi platform that combines yield optimization and cross-chain lending.

## Project Architecture Overview
- **Yield Optimizer Module**: AI-driven APR chasing across protocols and chains
- **Cross-Chain Lending Module**: Undercollateralized loans with dynamic rates
- **ElizaOS Agents**: LLM-powered automation for all workflows
- **Chainlink Integration**: Oracles, CCIP, Functions, Automation, VRF

## Technology Stack
- **Smart Contracts**: Solidity + Foundry
- **AI Agents**: ElizaOS (NestJS + TypeScript + LLM)
- **Backend**: NestJS + TypeScript + MongoDB
- **Frontend**: Next.js 15 + React 19 + TailwindCSS
- **Oracles**: Chainlink (Data Feeds, CCIP, Functions, Automation, VRF)

## Core Modules Integration
- **Yield and Lending Synergy**: Vault yields offset borrowing costs
- **Idle Collateral Routing**: Automatically route collateral into yield optimizer
- **Cross-Chain Fluidity**: CCIP enables funds movement for optimal rates
- **AI Decision Making**: LLMs handle APR prediction and loan underwriting

## AI Agent Patterns
- **Yield Monitoring Agent**: Tracks APRs and triggers rebalancing
- **Underwriting Agent**: Processes loan applications with KYC/credit data
- **Liquidation Monitor**: Monitors health factors and prevents liquidations
- **Collateral Router**: Optimizes idle collateral placement

## Development Standards
- Use TypeScript strict mode across all projects
- Implement comprehensive testing (unit, integration, e2e)
- Follow consistent naming conventions across all codebases
- Use proper error handling and logging throughout
- Implement proper documentation with examples

## Security & Risk Management
- Multi-sig for all admin functions
- Timelock for critical parameter updates
- Circuit breakers for large movements
- Conservative LTV ratios (60-70%)
- Oracle manipulation protection

## Key Metrics & KPIs
- **TVL (Total Value Locked)**: Target $10M+ by launch
- **APY Performance**: Beat benchmark by 2%+
- **Liquidation Rate**: <2% of loans
- **Agent Uptime**: 99.9%
- **Cross-chain Success Rate**: >98%

## Integration Points
- Smart contracts emit events consumed by backend
- Backend provides APIs consumed by frontend
- AI agents interact with both blockchain and backend
- WebSocket connections provide real-time updates
- Chainlink services provide external data and automation
